!function(t){function e(e){for(var i,o,l=e[0],s=e[1],p=e[2],u=0,d=[];u<l.length;u++)o=l[u],a[o]&&d.push(a[o][0]),a[o]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i]);for(c&&c(e);d.length;)d.shift()();return r.push.apply(r,p||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,l=1;l<n.length;l++){var s=n[l];0!==a[s]&&(i=!1)}i&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var i={},a={2:0},r=[];function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var l=window.webpackJsonp=window.webpackJsonp||[],s=l.push.bind(l);l.push=e,l=l.slice();for(var p=0;p<l.length;p++)e(l[p]);var c=s;r.push([23,0]),n()}({23:function(t,e,n){"use strict";n.r(e);var i=n(0),a=n.n(i),r=n(8),o=n.n(r),l=n(1),s=n.n(l),p=n(7),c=n.n(p),u=n(5),d=n(3),h=n.n(d),m=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var f=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.state={shippingEstimate:null,noShippingEstimate:!1,isValid:!1,postcode:"",error:!1,loading:!1},i.handleValidatePostcode=i.handleValidatePostcode.bind(i),i.handleSubmit=i.handleSubmit.bind(i),i.handlePostcodeChange=i.handlePostcodeChange.bind(i),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i["Component"]),m(e,[{key:"handleSubmit",value:function(){var t,e=this;if(this.state.isValid){var n={postcode:this.state.postcode,items:(t=this.props.items,t.filter(function(t){return t.sku.length}))},i=this.props.apiUrl+"/shipping-simple";this.setState({loading:!0}),c.a.post(i,n).then(function(t){if(t&&t.data.rates){var n=function(t){return t.filter(function(t){return["Australia Post","Truck delivery"].includes(t.service_name)})}(t.data.rates);return n.length?e.setState({shippingEstimate:{name:n[0].store.name,total:n[0].total_price},postcode:"",loading:!1,noShippingEstimate:!1}):e.setState({noShippingEstimate:!0,shippingEstimate:null,loading:!1})}return e.setState({error:!0,loading:!1,noShippingEstimate:!1,shippingEstimate:null})}).catch(function(){e.setState({error:!0,loading:!1,noShippingEstimate:!1,shippingEstimate:null})})}}},{key:"handlePostcodeChange",value:function(t){var e=t.target.value;this.setState({postcode:e}),this.handleValidatePostcode(e)}},{key:"handleValidatePostcode",value:function(t){var e=new RegExp("^[0-9]+$");4===t.length&&e.test(t)?this.setState({isValid:!0}):this.setState({isValid:!1})}},{key:"render",value:function(){return a.a.createElement("div",{className:h.a.Container},a.a.createElement("h4",{className:h.a.Title},"Delivery Estimator"),a.a.createElement("div",{className:h.a.InnerContainer},a.a.createElement("input",{className:h.a.Field,type:"text",placeholder:"POSTCODE",value:this.state.postcode,onChange:this.handlePostcodeChange}),a.a.createElement(u.a,{className:h.a.Button,type:"button",loading:this.state.loading,disabled:!this.state.isValid||this.state.loading,onClick:this.handleSubmit},"Estimate")),this.state.shippingEstimate&&a.a.createElement("div",null,a.a.createElement("div",{className:h.a.DeliveryCost},a.a.createElement("p",null,"Estimated Truck Delivery from ",this.state.shippingEstimate.name),a.a.createElement("p",null,"$",this.state.shippingEstimate.total/100)),a.a.createElement("p",{className:h.a.Confirmation},"Confirm delivery in checkout")),this.state.noShippingEstimate&&a.a.createElement("p",null,"Unable to estimate delivery. Please continue to checkout."),this.state.error&&a.a.createElement("p",{className:h.a.Error},"Something went wrong, please try again"))}}]),e}();f.propTypes={items:s.a.array.isRequired,apiUrl:s.a.string.isRequired};var g=f,b=document.getElementById("react-shipping-calculator"),y=b.dataset.apiUrl,v=JSON.parse(b.dataset.items);o.a.render(a.a.createElement(g,{apiUrl:y,items:v}),b)},25:function(t,e,n){(e=t.exports=n(10)(!1)).push([t.i,".shippingCalculator_Container_128GwHn {\n  margin-bottom: 20px; }\n\n.shippingCalculator_InnerContainer_EcNnhcP {\n  display: -ms-flexbox;\n  display: flex;\n  margin-bottom: 10px; }\n\n.shippingCalculator_Button_2a7HOcy {\n  border-radius: 0 3px 3px 0;\n  width: 200px;\n  min-width: 150px; }\n\n.shippingCalculator_Title_37etlAY {\n  margin-bottom: 10px; }\n\n.shippingCalculator_DeliveryCost_12d1mcC {\n  display: -ms-flexbox;\n  display: flex;\n  margin-bottom: 5px; }\n  .shippingCalculator_DeliveryCost_12d1mcC p {\n    margin: 0; }\n    .shippingCalculator_DeliveryCost_12d1mcC p:last-child {\n      margin-left: auto;\n      font-weight: 500; }\n\n.shippingCalculator_Confirmation_1S8fpaS {\n  margin: 0;\n  color: #757575; }\n\n.shippingCalculator_Field_2X0Y09Q {\n  margin-bottom: 0;\n  height: 46px;\n  border: 1px solid #e5e5e5;\n  border-right: 0;\n  border-radius: 3px 0 0 3px;\n  min-width: 200px;\n  width: 100%;\n  padding: 0 10px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box; }\n\n.shippingCalculator_Error_2y-lVJZ {\n  text-align: center;\n  color: #cc0000;\n  margin: 10px; }\n",""]),e.locals={Container:"shippingCalculator_Container_128GwHn",InnerContainer:"shippingCalculator_InnerContainer_EcNnhcP",Button:"shippingCalculator_Button_2a7HOcy",Title:"shippingCalculator_Title_37etlAY",DeliveryCost:"shippingCalculator_DeliveryCost_12d1mcC",Confirmation:"shippingCalculator_Confirmation_1S8fpaS",Field:"shippingCalculator_Field_2X0Y09Q",Error:"shippingCalculator_Error_2y-lVJZ"}},3:function(t,e,n){var i=n(25);"string"==typeof i&&(i=[[t.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(9)(i,a);i.locals&&(t.exports=i.locals)}});