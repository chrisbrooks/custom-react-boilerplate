(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{23:function(t,e,n){"use strict";n.r(e);var i=n(0),a=n.n(i),r=n(8),o=n.n(r),l=n(1),s=n.n(l),p=n(7),c=n.n(p),h=n(5),u=n(3),d=n.n(u),g=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var m=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.state={shippingEstimate:null,noShippingEstimate:!1,isValid:!1,postcode:"",error:!1,loading:!1},i.handleValidatePostcode=i.handleValidatePostcode.bind(i),i.handleSubmit=i.handleSubmit.bind(i),i.handlePostcodeChange=i.handlePostcodeChange.bind(i),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i["Component"]),g(e,[{key:"handleSubmit",value:function(){var t,e=this;if(this.state.isValid){var n={postcode:this.state.postcode,items:(t=this.props.items,t.filter(function(t){return t.sku.length}))},i=this.props.apiUrl+"/shipping-simple";this.setState({loading:!0}),c.a.post(i,n).then(function(t){if(t&&t.data.rates){var n=function(t){return t.filter(function(t){return["Australia Post","Truck delivery"].includes(t.service_name)})}(t.data.rates);return n.length?e.setState({shippingEstimate:{name:n[0].store.name,total:n[0].total_price},postcode:"",loading:!1,noShippingEstimate:!1}):e.setState({noShippingEstimate:!0,shippingEstimate:null,loading:!1})}return e.setState({error:!0,loading:!1,noShippingEstimate:!1,shippingEstimate:null})}).catch(function(){e.setState({error:!0,loading:!1,noShippingEstimate:!1,shippingEstimate:null})})}}},{key:"handlePostcodeChange",value:function(t){var e=t.target.value;this.setState({postcode:e}),this.handleValidatePostcode(e)}},{key:"handleValidatePostcode",value:function(t){var e=new RegExp("^[0-9]+$");4===t.length&&e.test(t)?this.setState({isValid:!0}):this.setState({isValid:!1})}},{key:"render",value:function(){return a.a.createElement("div",{className:d.a.Container},a.a.createElement("h4",{className:d.a.Title},"Delivery Estimator"),a.a.createElement("div",{className:d.a.InnerContainer},a.a.createElement("input",{className:d.a.Field,type:"text",placeholder:"POSTCODE",value:this.state.postcode,onChange:this.handlePostcodeChange}),a.a.createElement(h.a,{className:d.a.Button,type:"button",loading:this.state.loading,disabled:!this.state.isValid||this.state.loading,onClick:this.handleSubmit},"Estimate")),this.state.shippingEstimate&&a.a.createElement("div",null,a.a.createElement("div",{className:d.a.DeliveryCost},a.a.createElement("p",null,"Estimated Truck Delivery from ",this.state.shippingEstimate.name),a.a.createElement("p",null,"$",this.state.shippingEstimate.total/100)),a.a.createElement("p",{className:d.a.Confirmation},"Confirm delivery in checkout")),this.state.noShippingEstimate&&a.a.createElement("p",null,"Unable to estimate delivery. Please continue to checkout."),this.state.error&&a.a.createElement("p",{className:d.a.Error},"Something went wrong, please try again"))}}]),e}();m.propTypes={items:s.a.array.isRequired,apiUrl:s.a.string.isRequired};var f=m,C=document.getElementById("react-shipping-calculator"),_=C.dataset.apiUrl,b=JSON.parse(C.dataset.items);o.a.render(a.a.createElement(f,{apiUrl:_,items:b}),C)},25:function(t,e,n){(e=t.exports=n(10)(!1)).push([t.i,".shippingCalculator_Container_2xdwxWv {\n  margin-bottom: 20px; }\n\n.shippingCalculator_InnerContainer_3G3ZV1R {\n  display: -ms-flexbox;\n  display: flex;\n  margin-bottom: 10px; }\n\n.shippingCalculator_Button_2tdGfQl {\n  border-radius: 0 3px 3px 0;\n  width: 200px;\n  min-width: 150px; }\n\n.shippingCalculator_Title_EggGBHA {\n  margin-bottom: 10px; }\n\n.shippingCalculator_DeliveryCost_2KUCh1g {\n  display: -ms-flexbox;\n  display: flex;\n  margin-bottom: 5px; }\n  .shippingCalculator_DeliveryCost_2KUCh1g p {\n    margin: 0; }\n    .shippingCalculator_DeliveryCost_2KUCh1g p:last-child {\n      margin-left: auto;\n      font-weight: 500; }\n\n.shippingCalculator_Confirmation_Krk3kkX {\n  margin: 0;\n  color: #757575; }\n\n.shippingCalculator_Field_2Vl_7tg {\n  margin-bottom: 0;\n  height: 46px;\n  border: 1px solid #e5e5e5;\n  border-right: 0;\n  border-radius: 3px 0 0 3px;\n  min-width: 200px;\n  width: 100%;\n  padding: 0 10px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box; }\n\n.shippingCalculator_Error_1xNVH1- {\n  text-align: center;\n  color: #cc0000;\n  margin: 10px; }\n",""]),e.locals={Container:"shippingCalculator_Container_2xdwxWv",InnerContainer:"shippingCalculator_InnerContainer_3G3ZV1R",Button:"shippingCalculator_Button_2tdGfQl",Title:"shippingCalculator_Title_EggGBHA",DeliveryCost:"shippingCalculator_DeliveryCost_2KUCh1g",Confirmation:"shippingCalculator_Confirmation_Krk3kkX",Field:"shippingCalculator_Field_2Vl_7tg",Error:"shippingCalculator_Error_1xNVH1-"}},3:function(t,e,n){var i=n(25);"string"==typeof i&&(i=[[t.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(9)(i,a);i.locals&&(t.exports=i.locals)}},[[23,0,1]]]);